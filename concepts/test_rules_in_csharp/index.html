
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <meta name="author" content="Alexander Serowy">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.7">
    
    
      
        <title>How to test rules in C# - thebook</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.19753c6b.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.196e0c26.min.css">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#motivation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="thebook" class="md-header-nav__button md-logo" aria-label="thebook">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            thebook
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              How to test rules in C#
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/aserowy/thebook/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="thebook" class="md-nav__button md-logo" aria-label="thebook">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    thebook
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/aserowy/thebook/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" >
    <label class="md-nav__link" for="nav-2">
      <span class="md-nav__icon md-icon"></span>
      
        Requirements
      
    </label>
    <nav class="md-nav" aria-label="Requirements" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        
          Requirements
        
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1" >
    <label class="md-nav__link" for="nav-2-1">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../../requirements/domain_driven_design/" class="md-nav__link"
          style="margin: initial; padding: initial; pointer-events: initial">
      
        Domain driven design
      </a>
    </label>
    <nav class="md-nav" aria-label="Domain driven design" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../../requirements/domain_driven_design/" class="md-nav__link"
            style="margin: initial; padding: initial; pointer-events: initial">
        
          Domain driven design
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../requirements/domain_driven_design/eric_evans_bubbles/" class="md-nav__link">
      Eric evans bubbles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../requirements/domain_driven_design/extract_bounded_contexts/" class="md-nav__link">
      Extract bounded contexts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../requirements/domain_driven_design/nick_tunes_toolbox/" class="md-nav__link">
      Nick tunes toolbox
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" >
    <label class="md-nav__link" for="nav-3">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../../architectural_pattern/" class="md-nav__link"
          style="margin: initial; padding: initial; pointer-events: initial">
      
        Architectural pattern
      </a>
    </label>
    <nav class="md-nav" aria-label="Architectural pattern" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../../architectural_pattern/" class="md-nav__link"
            style="margin: initial; padding: initial; pointer-events: initial">
        
          Architectural pattern
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../architectural_pattern/event_sourcing/" class="md-nav__link">
      Event sourcing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../architectural_pattern/feature_flags/" class="md-nav__link">
      Feature flags
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../architectural_pattern/microservices/" class="md-nav__link">
      Microservices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../architectural_pattern/sagas_pattern/" class="md-nav__link">
      Sagas pattern
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
    <label class="md-nav__link" for="nav-4">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../../principles/" class="md-nav__link"
          style="margin: initial; padding: initial; pointer-events: initial">
      
        Principles
      </a>
    </label>
    <nav class="md-nav" aria-label="Principles" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../../principles/" class="md-nav__link"
            style="margin: initial; padding: initial; pointer-events: initial">
        
          Principles
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../principles/dependency_inversion_principle/" class="md-nav__link">
      Dependency inversion principle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../principles/interface_segregation_principle/" class="md-nav__link">
      Interface segregation principle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../principles/liskov_substitution_principle/" class="md-nav__link">
      Liskov substitution principle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../principles/open_closed_principle/" class="md-nav__link">
      Open-closed principle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../principles/single_responsibility_principle/" class="md-nav__link">
      Single Responsibility principle
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" >
    <label class="md-nav__link" for="nav-5">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../../design_pattern/" class="md-nav__link"
          style="margin: initial; padding: initial; pointer-events: initial">
      
        Design pattern
      </a>
    </label>
    <nav class="md-nav" aria-label="Design pattern" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../../design_pattern/" class="md-nav__link"
            style="margin: initial; padding: initial; pointer-events: initial">
        
          Design pattern
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1" >
    <label class="md-nav__link" for="nav-5-1">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../../design_pattern/behavioral/" class="md-nav__link"
          style="margin: initial; padding: initial; pointer-events: initial">
      
        Behavioral
      </a>
    </label>
    <nav class="md-nav" aria-label="Behavioral" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../../design_pattern/behavioral/" class="md-nav__link"
            style="margin: initial; padding: initial; pointer-events: initial">
        
          Behavioral
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../design_pattern/behavioral/chain_of_responsibility/" class="md-nav__link">
      Chain of responsibility pattern
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../design_pattern/behavioral/strategy_pattern/" class="md-nav__link">
      Strategy pattern
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2" >
    <label class="md-nav__link" for="nav-5-2">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../../design_pattern/creational/" class="md-nav__link"
          style="margin: initial; padding: initial; pointer-events: initial">
      
        Creational
      </a>
    </label>
    <nav class="md-nav" aria-label="Creational" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../../design_pattern/creational/" class="md-nav__link"
            style="margin: initial; padding: initial; pointer-events: initial">
        
          Creational
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../design_pattern/creational/builder_pattern/" class="md-nav__link">
      Builder pattern
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3" >
    <label class="md-nav__link" for="nav-5-3">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../../design_pattern/functional/" class="md-nav__link"
          style="margin: initial; padding: initial; pointer-events: initial">
      
        Functional
      </a>
    </label>
    <nav class="md-nav" aria-label="Functional" data-md-level="2">
      <label class="md-nav__title" for="nav-5-3">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../../design_pattern/functional/" class="md-nav__link"
            style="margin: initial; padding: initial; pointer-events: initial">
        
          Functional
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../design_pattern/functional/composition_pattern/" class="md-nav__link">
      Composition pattern
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../design_pattern/functional/currying_pattern/" class="md-nav__link">
      Currying pattern
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4" >
    <label class="md-nav__link" for="nav-5-4">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../../design_pattern/resource_oriented/" class="md-nav__link"
          style="margin: initial; padding: initial; pointer-events: initial">
      
        Resource oriented
      </a>
    </label>
    <nav class="md-nav" aria-label="Resource oriented" data-md-level="2">
      <label class="md-nav__title" for="nav-5-4">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../../design_pattern/resource_oriented/" class="md-nav__link"
            style="margin: initial; padding: initial; pointer-events: initial">
        
          Resource oriented
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../design_pattern/resource_oriented/dispose_pattern/" class="md-nav__link">
      Dispose pattern
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-5" type="checkbox" id="nav-5-5" >
    <label class="md-nav__link" for="nav-5-5">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../../design_pattern/structural/" class="md-nav__link"
          style="margin: initial; padding: initial; pointer-events: initial">
      
        Structural
      </a>
    </label>
    <nav class="md-nav" aria-label="Structural" data-md-level="2">
      <label class="md-nav__title" for="nav-5-5">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../../design_pattern/structural/" class="md-nav__link"
            style="margin: initial; padding: initial; pointer-events: initial">
        
          Structural
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../design_pattern/structural/type_safe_enum_pattern/" class="md-nav__link">
      Type safe enum pattern
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    <label class="md-nav__link" for="nav-6">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../" class="md-nav__link"
          style="margin: initial; padding: initial; pointer-events: initial">
      
        Concepts
      </a>
    </label>
    <nav class="md-nav" aria-label="Concepts" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../" class="md-nav__link"
            style="margin: initial; padding: initial; pointer-events: initial">
        
          Concepts
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../document_microservices/" class="md-nav__link">
      How to document microservices
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="./" class="md-nav__link md-nav__link--active"
            style="margin: initial; padding: initial; pointer-events: initial">
        
          How to test rules in C#
        </a>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      How to test rules in C#
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    Motivation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    Context
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-by-step" class="md-nav__link">
    Step by step
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    Next steps
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../write_concepts/" class="md-nav__link">
      How to write concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-4" type="checkbox" id="nav-6-4" >
    <label class="md-nav__link" for="nav-6-4">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../templates/" class="md-nav__link"
          style="margin: initial; padding: initial; pointer-events: initial">
      
        Templates
      </a>
    </label>
    <nav class="md-nav" aria-label="Templates" data-md-level="2">
      <label class="md-nav__title" for="nav-6-4">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../templates/" class="md-nav__link"
            style="margin: initial; padding: initial; pointer-events: initial">
        
          Templates
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../templates/template_architectural_decisions/" class="md-nav__link">
      Architectural decision
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" >
    <label class="md-nav__link" for="nav-7">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../../devops/" class="md-nav__link"
          style="margin: initial; padding: initial; pointer-events: initial">
      
        Devops
      </a>
    </label>
    <nav class="md-nav" aria-label="Devops" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../../devops/" class="md-nav__link"
            style="margin: initial; padding: initial; pointer-events: initial">
        
          Devops
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../devops/azure/" class="md-nav__link">
      Azure DevOps
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" >
    <label class="md-nav__link" for="nav-8">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../../tips_and_more/" class="md-nav__link"
          style="margin: initial; padding: initial; pointer-events: initial">
      
        Tips and more
      </a>
    </label>
    <nav class="md-nav" aria-label="Tips and more" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../../tips_and_more/" class="md-nav__link"
            style="margin: initial; padding: initial; pointer-events: initial">
        
          Tips and more
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tips_and_more/csharp/" class="md-nav__link">
      C#
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2" type="checkbox" id="nav-8-2" >
    <label class="md-nav__link" for="nav-8-2">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../../tips_and_more/go/" class="md-nav__link"
          style="margin: initial; padding: initial; pointer-events: initial">
      
        Go
      </a>
    </label>
    <nav class="md-nav" aria-label="Go" data-md-level="2">
      <label class="md-nav__title" for="nav-8-2">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../../tips_and_more/go/" class="md-nav__link"
            style="margin: initial; padding: initial; pointer-events: initial">
        
          Go
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tips_and_more/go/array_operations/" class="md-nav__link">
      Array Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tips_and_more/go/array_tricks/" class="md-nav__link">
      Array tricks
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tips_and_more/visual_studio/" class="md-nav__link">
      Visual Studio
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../links/" class="md-nav__link">
      Links
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    Motivation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    Context
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-by-step" class="md-nav__link">
    Step by step
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    Next steps
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/aserowy/thebook/blob/master/docs/concepts/test_rules_in_csharp.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>How to test rules in C#</h1>
                
                <h2 id="motivation">Motivation</h2>
<p>To test rules, it is useful to make test data of specific rules available to all other rules. This way not only positive but also negative tests can be performed for all rules.</p>
<h2 id="context">Context</h2>
<p>In order to ensure that for individual rules the results for the test date and the respective rule are also run through when the test data is extended, the generation of test data and test results must be separated. Thus, leading to a resolver for test data only. The resolver returns a dictionary of test data type and data, to examine which test data resulted in e.g. failed tests.</p>
<p>To ensure reusability for tests the enumeration is implemented as an abstract class, which yields each key value pair and checks if the pair is specified in our test or fails otherwise.</p>
<p>In the test class a test data collection gets implemented and inherets from the given abstract class. It holds the relationship between test data type and expected result as an array of objects.</p>
<p>With <code>Theory</code> and <code>ClassData(typeof())</code> each yield can now be tested against the given test case.</p>
<h2 id="step-by-step">Step by step</h2>
<p>At first we create the data resolver to generate test data with a test data type.</p>
<div class="highlight"><pre><span></span><code><span class="k">internal</span> <span class="k">sealed</span> <span class="k">class</span> <span class="nc">AnalyzerMockTestDataResolver</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">IDictionary</span><span class="p">&lt;</span><span class="n">AnalyzerMockTestDataType</span><span class="p">,</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">ISagaProfileAnalyzer</span><span class="p">&gt;&gt;</span> <span class="n">Get</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="n">AnalyzerMockTestDataType</span><span class="p">,</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">ISagaProfileAnalyzer</span><span class="p">&gt;&gt;</span>
        <span class="p">{</span>
            <span class="p">{</span><span class="n">AnalyzerMockTestDataType</span><span class="p">.</span><span class="n">NoSagasRegistered</span><span class="p">,</span>  <span class="n">GetNoSagasRegistered</span><span class="p">()},</span>
            <span class="p">{</span><span class="n">AnalyzerMockTestDataType</span><span class="p">.</span><span class="n">ValidAnalyzers</span><span class="p">,</span>  <span class="n">GetValidAnalyzers</span><span class="p">()},</span>
            <span class="p">{</span><span class="n">AnalyzerMockTestDataType</span><span class="p">.</span><span class="n">EqualAnalyzerIdentifier</span><span class="p">,</span>  <span class="n">GetEqualAnalyzerIdentifier</span><span class="p">()},</span>
            <span class="p">{</span><span class="n">AnalyzerMockTestDataType</span><span class="p">.</span><span class="n">EqualVersionIdentifier</span><span class="p">,</span>  <span class="n">GetEqualVersionIdentifier</span><span class="p">()},</span>
            <span class="p">{</span><span class="n">AnalyzerMockTestDataType</span><span class="p">.</span><span class="n">VersionWithoutSteps</span><span class="p">,</span>  <span class="n">GetVersionWithoutSteps</span><span class="p">()}</span>
        <span class="p">};</span>
    <span class="p">}</span>
    <span class="k">private</span> <span class="k">static</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">ISagaProfileAnalyzer</span><span class="p">&gt;</span> <span class="n">GetNoSagasRegistered</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">ISagaProfileAnalyzer</span><span class="p">&gt;();</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">static</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">ISagaProfileAnalyzer</span><span class="p">&gt;</span> <span class="n">GetValidAnalyzers</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">ISagaProfileAnalyzer</span><span class="p">&gt;();</span>

        <span class="kt">var</span> <span class="n">analyzer01</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SagaProfileAnalyzerMock</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">);</span>
        <span class="n">result</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">analyzer01</span><span class="p">);</span>

        <span class="n">analyzer01</span>
            <span class="p">.</span><span class="n">AddVersion</span><span class="p">(</span><span class="s">&quot;1.1.0&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="n">AddStep</span><span class="p">&lt;</span><span class="n">SagaEvent01</span><span class="p">,</span> <span class="n">SagaStep01Mock</span><span class="p">&gt;()</span>
            <span class="p">.</span><span class="n">AddStep</span><span class="p">&lt;</span><span class="n">SagaEvent02</span><span class="p">,</span> <span class="n">SagaStep02Mock</span><span class="p">&gt;();</span>
<span class="p">...</span>
</code></pre></div>
<p>In order to ensure that all test data is passed through, we provide an abstract provider. This is used to deliver test data and test specific results.</p>
<div class="highlight"><pre><span></span><code><span class="na">[SuppressMessage(</span>
<span class="na">    &quot;Naming&quot;,</span>
<span class="na">    &quot;CA1710:Identifiers should have correct suffix&quot;,</span>
<span class="na">    Justification = &quot;abstract class name should end with base&quot;)]</span>
<span class="k">public</span> <span class="k">abstract</span> <span class="k">class</span> <span class="nc">AnalyzerMockTestDataCollectionBase</span> <span class="p">:</span> <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">[]&gt;</span>
<span class="p">{</span>
    <span class="k">internal</span> <span class="k">abstract</span> <span class="kt">object</span><span class="p">[]?</span> <span class="n">GetReturnValuesByDataType</span><span class="p">(</span><span class="n">AnalyzerMockTestDataType</span> <span class="n">type</span><span class="p">);</span>

    <span class="k">public</span> <span class="n">IEnumerator</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">[]&gt;</span> <span class="n">GetEnumerator</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">resolver</span> <span class="p">=</span> <span class="k">new</span> <span class="n">AnalyzerMockTestDataResolver</span><span class="p">();</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">kvp</span> <span class="k">in</span> <span class="n">resolver</span><span class="p">.</span><span class="n">Get</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">values</span> <span class="p">=</span> <span class="n">GetReturnValuesByDataType</span><span class="p">(</span><span class="n">kvp</span><span class="p">.</span><span class="n">Key</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">values</span> <span class="k">is</span> <span class="k">null</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">KeyNotFoundException</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;{GetType().Name} does not contain &quot;</span> <span class="p">+</span>
                    <span class="err">$</span><span class="s">&quot;return values for test data of type &quot;</span> <span class="p">+</span>
                    <span class="err">$</span><span class="s">&quot;{Enum.GetName(typeof(AnalyzerMockTestDataType), kvp.Key)}.&quot;</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;</span> <span class="p">{</span> <span class="n">kvp</span><span class="p">.</span><span class="n">Value</span> <span class="p">};</span>
            <span class="n">result</span><span class="p">.</span><span class="n">AddRange</span><span class="p">(</span><span class="n">values</span><span class="p">);</span>

            <span class="k">yield</span> <span class="k">return</span> <span class="n">result</span><span class="p">.</span><span class="n">ToArray</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">IEnumerator</span> <span class="n">IEnumerable</span><span class="p">.</span><span class="n">GetEnumerator</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nf">GetEnumerator</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Now we can use the base class and include it in our tests.</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span> <span class="k">class</span> <span class="nc">MultipleVersionsWithEqualIdentifierRuleTests</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="n">MultipleVersionsWithEqualIdentifierRule</span> <span class="nf">CreateMultipleVersionsWithEqualIdentifierRule</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">MultipleVersionsWithEqualIdentifierRule</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">class</span> <span class="nc">AnalyzerMockTestDataCollection</span> <span class="p">:</span> <span class="n">AnalyzerMockTestDataCollectionBase</span>
    <span class="p">{</span>
        <span class="k">internal</span> <span class="k">override</span> <span class="kt">object</span><span class="p">[]?</span> <span class="n">GetReturnValuesByDataType</span><span class="p">(</span><span class="n">AnalyzerMockTestDataType</span> <span class="n">type</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">type</span> <span class="k">switch</span>
            <span class="p">{</span>
                <span class="n">AnalyzerMockTestDataType</span><span class="p">.</span><span class="n">NoSagasRegistered</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span> <span class="p">},</span>
                <span class="n">AnalyzerMockTestDataType</span><span class="p">.</span><span class="n">ValidAnalyzers</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span> <span class="p">},</span>
                <span class="n">AnalyzerMockTestDataType</span><span class="p">.</span><span class="n">EqualAnalyzerIdentifier</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span> <span class="p">},</span>
                <span class="n">AnalyzerMockTestDataType</span><span class="p">.</span><span class="n">EqualVersionIdentifier</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span> <span class="m">0</span><span class="p">,</span> <span class="m">2</span> <span class="p">},</span>
                <span class="n">AnalyzerMockTestDataType</span><span class="p">.</span><span class="n">VersionWithoutSteps</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span> <span class="p">},</span>
                <span class="n">_</span> <span class="p">=&gt;</span> <span class="k">null</span>
            <span class="p">};</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="na">    [Theory]</span>
<span class="na">    [ClassData(typeof(AnalyzerMockTestDataCollection))]</span>
    <span class="k">internal</span> <span class="k">void</span> <span class="nf">Validate</span><span class="p">(</span><span class="n">IList</span><span class="p">&lt;</span><span class="n">ISagaProfileAnalyzer</span><span class="p">&gt;</span> <span class="n">analyzers</span><span class="p">,</span> <span class="kt">int</span> <span class="n">countWarnings</span><span class="p">,</span> <span class="kt">int</span> <span class="n">countExceptions</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Arrange</span>
        <span class="kt">var</span> <span class="n">multipleVersionsWithEqualIdentifierRule</span> <span class="p">=</span> <span class="n">CreateMultipleVersionsWithEqualIdentifierRule</span><span class="p">();</span>

        <span class="c1">// Act</span>
        <span class="kt">var</span> <span class="p">(</span><span class="n">warnings</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">)</span> <span class="p">=</span> <span class="n">multipleVersionsWithEqualIdentifierRule</span><span class="p">.</span><span class="n">Validate</span><span class="p">(</span><span class="n">analyzers</span><span class="p">);</span>

        <span class="c1">// Assert</span>
        <span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">countWarnings</span><span class="p">,</span> <span class="n">warnings</span><span class="p">?.</span><span class="n">Count</span><span class="p">()</span> <span class="p">??</span> <span class="m">0</span><span class="p">);</span>
        <span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">countExceptions</span><span class="p">,</span> <span class="n">exceptions</span><span class="p">?.</span><span class="n">Count</span><span class="p">()</span> <span class="p">??</span> <span class="m">0</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="next-steps">Next steps</h2>
<p>For a resuable structure you should use dependency injection to decouple test data generation and <code>GetEnumerator()</code>.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../document_microservices/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                How to document microservices
              </div>
            </div>
          </a>
        
        
          <a href="../write_concepts/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                How to write concepts
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.0ac82a11.min.js"></script>
      <script src="../../assets/javascripts/bundle.f81dfb4d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ['navigation.instant'],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>